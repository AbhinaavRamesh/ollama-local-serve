# =============================================================================
# Ollama Local Serve - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment

# -----------------------------------------------------------------------------
# Ollama Configuration
# -----------------------------------------------------------------------------
OLLAMA_HOST=http://ollama:11434
OLLAMA_MODEL=llama3.2
OLLAMA_TIMEOUT=120

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_LOG_LEVEL=info

# CORS Configuration (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://frontend

# -----------------------------------------------------------------------------
# Instrumentation Configuration
# -----------------------------------------------------------------------------
ENABLE_INSTRUMENTATION=true
EXPORTER_TYPE=clickhouse
# Options: clickhouse, postgres, both, none

METRICS_EXPORT_INTERVAL=5
# Interval in seconds for batch metric export

SERVICE_NAME=ollama-local-serve
# Service name for OTEL metrics

# -----------------------------------------------------------------------------
# ClickHouse Configuration
# -----------------------------------------------------------------------------
CLICKHOUSE_HOST=clickhouse
CLICKHOUSE_PORT=9000
CLICKHOUSE_HTTP_PORT=8123
CLICKHOUSE_DATABASE=ollama_metrics
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=

# ClickHouse resource limits
CLICKHOUSE_MAX_MEMORY_USAGE=2000000000
# 2GB memory limit

# -----------------------------------------------------------------------------
# PostgreSQL Configuration
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DATABASE=ollama_metrics
POSTGRES_USER=ollama
POSTGRES_PASSWORD=ollama_secure_password_change_me

# PostgreSQL connection pool settings
POSTGRES_POOL_SIZE=5
POSTGRES_MAX_OVERFLOW=10

# TimescaleDB (set to true if TimescaleDB extension is installed)
USE_TIMESCALE=true

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
VITE_API_URL=/api
# API URL for frontend (relative for same-origin, absolute for cross-origin)

# Default theme (light or dark)
VITE_DEFAULT_THEME=dark

# Default refresh interval in milliseconds
VITE_DEFAULT_REFRESH_INTERVAL=30000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

LOG_FORMAT=json
# Options: json, text

# -----------------------------------------------------------------------------
# Docker Configuration
# -----------------------------------------------------------------------------
# Compose project name
COMPOSE_PROJECT_NAME=ollama-monitor

# Network mode
NETWORK_MODE=bridge

# Restart policy
RESTART_POLICY=unless-stopped

# -----------------------------------------------------------------------------
# Resource Limits (Docker)
# -----------------------------------------------------------------------------
# API Service
API_MEMORY_LIMIT=512m
API_CPU_LIMIT=1.0

# Frontend
FRONTEND_MEMORY_LIMIT=128m
FRONTEND_CPU_LIMIT=0.5

# ClickHouse
CLICKHOUSE_MEMORY_LIMIT=4g
CLICKHOUSE_CPU_LIMIT=2.0

# PostgreSQL
POSTGRES_MEMORY_LIMIT=1g
POSTGRES_CPU_LIMIT=1.0

# Ollama (GPU-enabled container)
OLLAMA_MEMORY_LIMIT=8g
OLLAMA_CPU_LIMIT=4.0
# NVIDIA_VISIBLE_DEVICES=all

# -----------------------------------------------------------------------------
# Data Persistence
# -----------------------------------------------------------------------------
# Volume mount paths (relative to docker-compose.yml)
DATA_PATH=./data

CLICKHOUSE_DATA_PATH=${DATA_PATH}/clickhouse
POSTGRES_DATA_PATH=${DATA_PATH}/postgres
OLLAMA_DATA_PATH=${DATA_PATH}/ollama

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# API Key for authentication (optional, leave empty to disable)
API_KEY=

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# -----------------------------------------------------------------------------
# Development Configuration
# -----------------------------------------------------------------------------
# Set to true for development mode
DEBUG=false

# Hot reload for API development
API_RELOAD=false

# Frontend development server
FRONTEND_DEV_PORT=5173
